{{define "content"}}
<header class="flex justify-between items-center">
  <h1>
    <input
      placeholder="Recipe name"
      required
      type="text"
      name="name"
      value="{{.Recipe.Name}}"
    />
  </h1>
  <nav>
    <a class="link" href="/recipes">Recipes</a>
    <a class="link" href="/recipes/new">New Recipe</a>
    <a class="link" href="/logout">Log Out</a>
  </nav>
</header>
<form class="recipe-form mt-8" hx-post="{{.Action}}" hx-target="body">
  <h2>Description</h2>
  <input
    type="text"
    name="description"
    placeholder="Recipe Description"
    value="{{.Recipe.Description}}"
  />
  <section class="ingredients-container mt-8">
    <hgroup class="flex flex-start items-center gap-4">
      <h2>Ingredients</h2>
      <button
        type="button"
        class="bg-blue-500 text-white rounded-sm p-2 hover:bg-blue-600"
        _="on click put #ingredient-template.content.cloneNode(true) at the end of #ingredients-list"
      >
        + Ingredient
      </button>
    </hgroup>

    <div id="ingredients-list" class="flex flex-col gap-2 mt-4">
      {{ range .Recipe.Ingredients }}
      <div class="flex flex-row gap-2 ingredient">
        <div>
          Name
          <input
            type="text"
            name="ingredients"
            placeholder="Ingredient Name"
            value="{{.Name}}"
          />
        </div>
        <div>
          Quantity
          <input
            type="text"
            name="quantities"
            placeholder="Quantity"
            value="{{.Quantity}}"
          />
        </div>

        <button
          class="bg-slate-300 text-white rounded-sm p-2 hover:bg-slate-400"
          type="button"
          _="on click remove closest .ingredient"
        >
          remove
        </button>
      </div>

      {{ end }}
    </div>
  </section>
  <section class="instructions-container mt-8">
    <h2>Instructions</h2>
    <textarea class="w-1/2 h-48" name="instructions" placeholder="Instructions">
{{.Recipe.Instructions}}</textarea
    >
  </section>
  <button
    class="bg-blue-500 text-white rounded-sm p-2 hover:bg-blue-600"
    type="submit"
  >
    Save
  </button>
</form>

<template id="ingredient-template">
  <div class="flex flex-row gap-2 ingredient">
    <div>
      Name
      <input type="text" name="ingredients" placeholder="Ingredient Name" />
    </div>
    <div>
      Quantity
      <input type="text" name="quantities" placeholder="Quantity" />
    </div>

    <button
      class="bg-slate-300 text-white rounded-sm p-2 hover:bg-slate-400"
      type="button"
      _="on click remove closest .ingredient"
    >
      remove
    </button>
  </div>
</template>

{{end}}
